<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="../assets/css/xua-documentation.css" rel="stylesheet" type="text/css" />
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <title>Units; - XUA Documentation</title>
</head>

<body>

    <div id="page">

        <div id="header">
            <div class='booktitleinheader'><a href='../index.html'>XUA Documentation</a></div>
            <ul id='menu'>
                <li class='menu-item'><a href='../docs/index.html'>Table of Contents</a></li>
                <li class='menu-item'><a href='../docs/CheatSheet.html'>Cheat Sheet</a></li>
                <li class='menu-item'><a href='../docs/Architecture.html'>Architecture</a></li>
            </ul>
        </div>

        <div id="main">

            <h1 class="libtitle">
                Units;
                <span class="subtitle">The Fundamentals</span>
            </h1>

            <div class = 'comment'><a href='#Introduction'><h1 class='h1' id='Introduction'> Introduction</h1></a>
In this chapter, we try to focus on concepts and theories, reading this chapter helps the reader understand the concepts and fundamentals but to turn these theories into practice, one must read the main chapter of each section which is more practical. Not all of units are needed to be defined by the programmer and most of them are generated by XUA. There are only a few units that require practical understanding, and there is a main chapter for each.</div><div class = 'comment'><a href='#XUA_Server'><h1 class='h1' id='XUA_Server'> XUA Server</h1></a>
XUA generates three projects. XUA Server, Marshal Library, and Documentations. Among these projects, the server is the most important
one which contains all the units that serve logics to the whole project. The role of Server is to be an interface between user and
database which reads and modifies data, in this manner the server must check the permissions for read and write and serve proper
access to data for all users.</div><div class = 'comment'><a href='#Universal_Resources_Pool'><h2 class='h2' id='Universal_Resources_Pool'> Universal Resources Pool</h2></a>
A XUA Server contains a pool of resources that are available for use. These resources can be available universally, i.e., foreign
parties can use resources, and internally, i.e., available for internal resources and units. The idea is similar to private and
public features of a class, but a public feature is only accessible from other codes on the same project, while a universal resource
is accessible from other projects, even on other machines other than where server project is stored. XUA resources are divided to <a href='#Resource<em>Files'>Files</a>, <a href='#PHP</em>Service<em>Classes'>Services</a>, <a href='#Super</em>Types'>Supers</a>, <a href='#Entities'>Entities</a>, and <a href='#Methods'>Methods</a>.</div><div class = 'comment'><a href='#Entities'><h3 class='h3' id='Entities'> Entities</h3></a>
<a href='Entities.html'>(main chapter)</a></div><div class = 'comment'>XUA can be configured to communicate with a database server (usually MySQL), but the programmer needs to specify the database structure. To do so, XUA offers Entity Blocks, it will generate a PHP class extending a XUA abstract class called <code>XUA\Entity</code> for each Entity Block the programmer creates. these Entity classes are in a one-to-one relationship with database tables. Each row of the table then, can be corresponded by an instance of the tableâ€™s corresponding class.</div><div class = 'comment'>In order to define an entity, the programmer needs to define a mapping called <code>Fields</code> that contains columns of entities as keys, and their types as values. Setting the <code>Fields</code> is mandatory, but there are some optional members an entity may have. One member is a list called <code>Indices</code>, which defines the MySQL indices, that would make select queries faster, or control unique values (Read more about MySQL indices by googling). Another is the function called <code>Validation</code>, that checks if an entity instance (a row) is valid. For example assume we have two fields <code>country</code> and <code>city</code> in entity <code>User</code>, the validation function is responsible to check if the city is inside the country and avoid invalid data from storing. Therefore an entity is theoretically a triplet \(E = (F, I, V)\), but you'll see that you can override an entity methods, i.e., there are more to define on entity than just <code>Fields</code>, <code>Indices</code>, and <code>Validation</code>.</div><div class = 'comment'><a href='#Methods'><h3 class='h3' id='Methods'> Methods</h3></a>
<a href='Methods.html'>(main chapter)</a></div><div class = 'comment'>Methods are the main part of a XUA Project. A method is a very small unit that does a special job when called. One can think of methods as just functions but there are two differences. A method can be called from outside of the project, and can return multiple values.</div><div class = 'comment'>Methods are simply triplets \(M = (Q, S, B)\). First member, <code>Request</code>, shown by \(Q\), defines the structure of request that needs to be prepared and given to the method, and the second one, <code>Response</code>, shown by \(S\), defines the structure of response that the method returns. The third member, <code>Body</code>, shown by \(B\) is a piece of code that does all the function.</div><div class = 'comment'><a href='#Super_Types'><h3 class='h3' id='Super_Types'> Super Types</h3></a>
<a href='Supers.html'>(main chapter)</a></div><div class = 'comment'>Super Types or simply Supers are actually parametric types.</div><div class = 'comment'>Let's talk about types first. One can think of a type as a set, for example the type <code>Integer</code> is actually the set \(\mathbb{Z} = \{0, 1, -1, 2, -2, \dots \}\) and when we say that \(42\) is of type <code>Integer</code>, this means that \(42 \in \mathbb{Z}\), which is written \(42 : \mathbb{Z}\) in XUA syntax. But there are some features that types usually have which sets don't. In XUA's definition of type, types have a characteristic function which defines the set, and also a marshal function and an unmarshal function that prepare the values for transmitting or storing. There is also another property for types, called <code>DatabaseType</code> which tells the database how to store a value of this type. So a type is actually a 4-tuple \(T = (P, M, U, D)\) where predicate \(P\) is the characteristic function, \(M\) is the marshal function, \(U\) is the unmarshal function, and \(D\) is a string that defines the database type.</div><div class = 'comment'>As an example (that is not quite practical and efficient) let \(T\) be the type of integers. We know \(P(42)\) is true therefore we can say \(42 : T\). It seems that \(M\) must be \(U^{-1}\) but it is not a necessity. Let's say that \(M\) takes an integer and returns it's binary representation. therefore \(M(42) = '101010'\). The \(U\) must be the opposite so \(U('101010') = 42\). but what is \(U('42')\), the decimal representation in a string, can we say this is undefined and domain of \(U\) only accepts binary strings? This is up to the programmer that either \(U = M^{-1}\) or not and programmer must define both \(M\) and \(U\) functions separately. At last, if we use MySQL for database server, we can say \(D\) is the string <code>VARCHAR(100)</code>. This is because the result of our marshal function is a string and XUA uses that to store data in database.</div><div class = 'comment'>Now what is a Super Type? A super type is actually a function that takes some parameters and returns a type, a super type is an object a whole level above a type. Each super type eventually results in a PHP class extending a XUA abstract class called <code>XUA\Type</code>. each instance of this class is a type, and the class constructor is the function that takes some parameters and creates a type. The parameters are then accessible as attributes. For example take a look at <code>Enum</code> that takes one parameter called <code>values</code>.</div><pre><code>$genderType&nbsp;=&nbsp;new&nbsp;Enum([<br>&nbsp;&nbsp;&nbsp;&nbsp;'values'&nbsp;=>&nbsp;['male',&nbsp;'female']<br>]);<br></code></pre><div class = 'comment'>The parameter <code>values</code> is set to array <code>['male', 'female']</code> and the variable <code>$genderType</code> is now a type that has the 4 discussed members.</div><div class = 'comment'>\(P\), the first member, is called <code>accepts</code>.</div><pre><code>var_dump($genderType->accepts('male'));&nbsp;\\&nbsp;dumps&nbsp;true<br></code></pre><div class = 'comment'>Since \('male' \in \{'male', 'female'\}\).</div><div class = 'comment'>\(M\), the second member, is called <code>marshal</code>, and will return the index of the element in array <code>values</code>.</div><pre><code>var_dump($genderType->marshal('male'));&nbsp;\\&nbsp;dumps&nbsp;0<br>var_dump($genderType->marshal('female'));&nbsp;\\&nbsp;dumps&nbsp;1<br></code></pre><div class = 'comment'>\(U\), the third member, is called <code>unmarshal</code>.</div><pre><code>var_dump($genderType->unmarshal(1));&nbsp;\\&nbsp;dumps&nbsp;'female'<br></code></pre><div class = 'comment'><strong>Note</strong>: The marshal and unmarshal functions of XUA's official Enum are both identity function, this is just an example.</div><div class = 'comment'>\(D\), the fourth member, is called <code>databaseType</code>.</div><pre><code>var_dump($genderType->databaseType());&nbsp;\\&nbsp;dumps&nbsp;'INT'<br></code></pre><div class = 'comment'>There is also another member of this type, that gives you the parameters given to it when constructed.</div><pre><code>$genderType->parameters();<br></code></pre><div class = 'comment'>Will return the following map.</div><pre><code>[<br>&nbsp;&nbsp;&nbsp;&nbsp;'value'&nbsp;=>&nbsp;['male',&nbsp;'female']<br>]<br></code></pre><div class = 'comment'><a href='#PHP_Service_Classes'><h3 class='h3' id='PHP_Service_Classes'> PHP Service Classes</h3></a>
<a href='Services.html'>(main chapter)</a></div><div class = 'comment'><a href='#Interfaces'><h2 class='h2' id='Interfaces'> Interfaces</h2></a>
<a href='Interfaces.html'>(main chapter)</a></div><div class = 'comment'>interfaces are where we define routes, and write the code that will execute when a user requests on a specific route, we usually avoid writing codes that include business logic, instead we just call a resource that is responsible for the route. Since we have a specific route called <a href='#Universal<em>Resources</em>Pool<em>Interface</em>(URPI)'>URPI</a> that handles all the direct requests for resources, writing a new interface is mostly useful for rendering a website, i.e., we define routes for pages the user visits, and ask a resource (a Method resource) to create an html page, and show the page created to user.</div><div class = 'comment'><a href='#Resource_Files'><h2 class='h2' id='Resource_Files'> Resource Files</h2></a></div><div class = 'comment'><a href='#Public_Resource_Files'><h3 class='h3' id='Public_Resource_Files'> Public Resource Files</h3></a></div><div class = 'comment'><a href='#Private_Resource_Files'><h3 class='h3' id='Private_Resource_Files'> Private Resource Files</h3></a></div><div class = 'comment'><a href='#XUA_Server_Generated_Units'><h2 class='h2' id='XUA_Server_Generated_Units'> XUA Server Generated Units</h2></a></div><div class = 'comment'><a href='#Universal_Resources_Pool_Interface_(URPI)'><h3 class='h3' id='Universal_Resources_Pool_Interface_(URPI)'> Universal Resources Pool Interface (URPI)</h3></a>
Accessing resources on same project is as easy as it was before, one unit can just call a resource internally and there is no complexity. Although accessing a resource form other machines needs a protocol, the client needs to marshal the request in a data type which is available for transmitting on the network, then we need to unmarshal the request in a way that is meaningful for Universal Resource Pool, this is done by a predefined interface called URPI. The client tells URPI what resource is needed, URPI calls the resource, prepare the result for network transmitting, and sends the result back to client, where the result can be unmarshaled and used.</div><div class = 'comment'><a href='#Route_Detection_Unit'><h3 class='h3' id='Route_Detection_Unit'> Route Detection Unit</h3></a></div><div class = 'comment'><a href='#XUA_Exception_Handler'><h3 class='h3' id='XUA_Exception_Handler'> XUA Exception Handler</h3></a></div><div class = 'comment'><a href='#Template_Engine'><h3 class='h3' id='Template_Engine'> Template Engine</h3></a></div><div class = 'comment'><a href='#Marshal_Library'><h1 class='h1' id='Marshal_Library'> Marshal Library</h1></a></div><div class = 'comment'><a href='#Local_Service_Classes'><h2 class='h2' id='Local_Service_Classes'> Local Service Classes</h2></a></div><div class = 'comment'><a href='#Virtual_Resource_Pool'><h2 class='h2' id='Virtual_Resource_Pool'> Virtual Resource Pool</h2></a></div><div class = 'comment'><a href='#Entity_Interfaces'><h3 class='h3' id='Entity_Interfaces'> Entity Interfaces</h3></a></div><div class = 'comment'><a href='#Method_Interfaces'><h3 class='h3' id='Method_Interfaces'> Method Interfaces</h3></a></div><div class = 'comment'><a href='#Marshal_Library_Generated_Units'><h2 class='h2' id='Marshal_Library_Generated_Units'> Marshal Library Generated Units</h2></a></div><div class = 'comment'><a href='#Marshal/Unmarshal_Unit'><h3 class='h3' id='Marshal/Unmarshal_Unit'> Marshal/Unmarshal Unit</h3></a></div><div class = 'comment'><a href='#Http_Connection_Unit'><h3 class='h3' id='Http_Connection_Unit'> Http Connection Unit</h3></a></div><div class = 'comment'><a href='#Documentations'><h1 class='h1' id='Documentations'> Documentations</h1></a></div><div class = 'comment'><a href='#Service_Classes_Documentations'><h2 class='h2' id='Service_Classes_Documentations'> Service Classes Documentations</h2></a></div><div class = 'comment'><a href='#Super_Types_Documentations'><h2 class='h2' id='Super_Types_Documentations'> Super Types Documentations</h2></a></div><div class = 'comment'><a href='#Entities_Documentations'><h2 class='h2' id='Entities_Documentations'> Entities Documentations</h2></a></div><div class = 'comment'><a href='#Entities_Graph'><h2 class='h2' id='Entities_Graph'> Entities Graph</h2></a></div><div class = 'comment'><a href='#Methods_Documentations'><h2 class='h2' id='Methods_Documentations'> Methods Documentations</h2></a></div><div class = 'comment'><a href='#Book'><h2 class='h2' id='Book'> Book</h2></a></div><div class = 'comment'><a href='#Foreign_Units'><h1 class='h1' id='Foreign_Units'> Foreign Units</h1></a></div><div class = 'comment'><a href='#System_Resources'><h2 class='h2' id='System_Resources'> System Resources</h2></a></div><div class = 'comment'><a href='#Libraries'><h2 class='h2' id='Libraries'> Libraries</h2></a></div><div class = 'comment'><a href='#3rd_Party_Apps'><h2 class='h2' id='3rd_Party_Apps'> 3rd Party Apps</h2></a></div><div class = 'comment'><a href='#Database_and_Cache_Servers'><h2 class='h2' id='Database_and_Cache_Servers'> Database and Cache Servers</h2></a></div><div class = 'comment'><a href='#Web_Browser'><h2 class='h2' id='Web_Browser'> Web Browser</h2></a></div><div class = 'comment'><a href='#Native_Client_Codes'><h2 class='h2' id='Native_Client_Codes'> Native Client Codes</h2></a></div>

        </div>

        <div id="footer">
            This page has been generated by <a href="http://xuarazmi.ir/">xua</a>
        </div>

    </div>

</body>

</html>